# ESP8266 Power Distribution Controller

基于 ESP8266 的智能电源分配控制器，支持3通道继电器控制和单通道功率监测。

## 硬件要求

- ESP8266 NodeMCU 开发板
- 3通道继电器模块
- INA219 电流/电压传感器
- 10mΩ 分流电阻

## 引脚定义

- 继电器控制引脚：
  - RELAY1: D6 (GPIO12)
  - RELAY2: D7 (GPIO13)
  - RELAY3: D8 (GPIO15)
- INA219 传感器：
  - SDA: D2 (GPIO4)
  - SCL: D1 (GPIO5)

## 功能特性

1. 继电器控制
   - 3通道独立控制
   - 支持手动开关和定时控制
   - 状态记忆功能

2. 功率监测
   - 电压监测 (0-32V)
   - 电流监测 (0-1A)
   - 功率计算
   - 过流保护

3. Web界面
   - 响应式设计，支持移动端访问
   - 实时状态显示
   - 继电器控制开关
   - 功率监测数据显示
   - 固件更新功能

4. WiFi功能
   - 支持AP模式和STA模式
   - 自动重连
   - 配置保存

## 编译和上传

1. 安装依赖
   - Arduino IDE 或 PlatformIO
   - ESP8266 开发板支持包
   - 必要的库：
     - Adafruit INA219
     - ArduinoJson
     - ESP8266WiFi
     - ESP8266WebServer

2. 编译和上传
   - 使用 PlatformIO 编译和上传
   - 或使用 Arduino IDE 编译和上传

## 使用说明

1. 首次使用
   - 设备启动后会创建名为 "ESP_Power_Control" 的AP
   - 连接该AP，访问 192.168.4.1
   - 配置WiFi连接信息

2. 正常使用
   - 通过Web界面控制继电器
   - 查看实时功率数据
   - 设置过流保护阈值
   - 配置定时任务

## 注意事项

1. 硬件连接
   - 确保继电器模块正确连接
   - INA219 传感器需要正确接线
   - 分流电阻需要精确焊接

2. 安全使用
   - 注意电压和电流限制
   - 定期检查接线
   - 保持通风散热

## 更新日志

### v1.0.0
- 初始版本
- 3通道继电器控制
- INA219功率监测
- Web控制界面
- WiFi配置功能
